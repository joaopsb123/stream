<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>CatÃ¡logo de Filmes</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #111; color: #fff; }
    .header { padding: 1em; background: #222; display: flex; justify-content: space-between; align-items: center; }
    .movies { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1em; padding: 1em; }
    .movie { background: #1c1c1c; padding: 1em; border-radius: 8px; cursor: pointer; transition: 0.2s; }
    .movie:hover { background: #333; }
    .login-btn { background: #5865f2; padding: 0.5em 1em; border: none; color: white; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="header">
    <h1>ðŸŽ¬ Filmes & SÃ©ries</h1>
    <button class="login-btn" onclick="login()">Login com Discord</button>
  </div>

  <div class="movies" id="movies"></div>

  <script>
    function login() {
      const clientId = '1392176069070557365';
      const redirectUri = 'https://lily-dashboard-five.vercel.app/callback.html';
      const scope = 'identify';
      window.location.href =
        `https://discord.com/api/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code&scope=${scope}`;
    }

    async function loadMovies() {
      try {
        const res = await fetch('titles.json');
        const data = await res.json();
        const container = document.getElementById('movies');

        data.forEach(movie => {
          const div = document.createElement('div');
          div.className = 'movie';
          div.innerHTML = `<strong>${movie.title}</strong><br><small>${movie.year}</small>`;
          div.onclick = () => window.location.href = `movie.html?id=${movie.id}`;
          container.appendChild(div);
        });
      } catch (e) {
        console.error('Erro ao carregar tÃ­tulos:', e);
      }
    }

    loadMovies();
  </script>
</body>
</html>
